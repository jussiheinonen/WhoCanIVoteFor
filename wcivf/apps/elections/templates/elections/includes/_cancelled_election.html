{% load markdown_deux_tags %}
{% load humanize %}
{% load static %}

{% if object.metadata.cancelled_election.title %}
    <h4>{{ object.metadata.cancelled_election.title }}</h4>
{% else %}
    {% if object.winner_count == object.people.count %}
        <h4>Uncontested Election</h4>

        <p>This election was uncontested because the number of candidates who stood was equal to the number of available seats.
            There {{ object.winner_count|pluralize:"is,are" }} {{ object.winner_count|apnumber }}
            seat{{ object.winner_count|pluralize }} in this ward/division, and only
            {{ object.people.count|apnumber }} candidate{{ object.people|pluralize }}.</p>

        <p>No votes will be cast, and the candidate{{ object.people|pluralize }} below have been automatically declared
            the winner{{ object.people|pluralize }}.</p>

        {% if object.display_as_party_list %}
            {% include "elections/includes/_people_list_with_lists.html" with people=object.people %}
        {% else %}
            {% include "elections/includes/_people_list.html" with people=object.people %}
        {% endif %}

    {% else %}
        {% if object.people %}
            <h4>Uncontested and Rescheduled Election</h4>

            <p>This election was uncontested because the number of candidates who stood was fewer than the number of available seats.
                There {{ object.winner_count|pluralize:"is,are"}} {{ object.winner_count|apnumber }}
                seat{{ object.winner_count|pluralize }} in this ward/division, and only
                {{ object.people.count|apnumber }} candidate{{ object.people|pluralize }}.</p>

            <p>No votes will be cast, and the candidate{{ object.people|pluralize }} below
                ha{{ object.people|pluralize:"s,ve" }} been automatically declared the
                winner{{ object.people|pluralize }}.
                A new election to fill the unclaimed seat{{ object.people|pluralize }}
                will be held within 35 working days of the original election date.</p>

            {% if object.display_as_party_list %}
                {% include "elections/includes/_people_list_with_lists.html" with people=object.people %}
            {% else %}
                {% include "elections/includes/_people_list.html" with people=object.people %}
            {% endif %}

        {% else %}
            <h4>Rescheduled Election</h4>

            <p>This election will not take place because <a href="{{ object.ynr_link }}">no candidates have been nominated to stand</a>.
                A new election to fill the unclaimed seat{{ object.winner_count|pluralize }} will be held within 35 working days of the original election date.</p>
        {% endif %}
    {% endif %}
{% endif %}

<p>
    {% if object.replaced_by %}
        {% if object.election.in_past %}
            It was rescheduled for
        {% else %}
            It will now take place on
        {% endif %}
        <a href="{{ object.replaced_by.get_absolute_url }}">
            {{ object.replaced_by.election.election_date|date:"j F Y" }}.
        </a>
    {% endif %}


    {% if object.metadata.cancelled_election.url %}
        <a href="{{ object.metadata.cancelled_election.url }}">Read more</a>
    {% endif %}

</p>

<p>
    {% if object.metadata.cancelled_election.detail %}
        {{ object.metadata.cancelled_election.detail }}
    {% endif %}
</p>

